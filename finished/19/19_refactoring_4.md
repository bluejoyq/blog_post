# [소프트웨어 공학]리팩터링 4장
이번 장은 `테스트 구축하기`이다. 리팩터링을 하려면 불가피하게 저지르게 되는 실수를 잡아줄 견고한 `테스트 스위트(test suite)`가 뒷받침돼야 한다.
리팩터링을 하지 않더라도 좋은 테스트를 작성하면 개발 효율을 높여준다. 테스트 작성에 시간을 빼았기더라도 효율이 좋아진다.

## 4.1 자가 테스트 코드의 가치
프로그래머들이 실제로 코드를 작성하는 시간의 비중은 적다. 현재 상황 파악이나 설계를 고민하기도 하지만 대부분은 디버깅에 쓴다. 버그 수정은 금방 끝나지만 버그를 찾는 것이 문제이다.
그걸 해결하기 위해 테스트 코드를 추가해 컴파일 할때마다 테스트를 함께하면 생산성이 급상승한다.
`테스트 주도 개발(Test-Driven Development)`이란 기법에서는 
1. 테스트를 작성하고 (통과 못할)
2. 테스트를 통과하게끔 코드를 작성하고
3. 결과 코드를 최대한 깔끔하게 리팩터링한다.
위 과정을 짧은 주기로 반복한다. 저자는 이 방식을 추천했다.
테스트 코드는 중요하 누구나 효과를 볼 수 있으며, 리팩터링을 위해서는 꼭 테스트가 필요하다.
이번 장에서는 JS 테스트용으로 테스트 코드를 작성하는 방법을 소개하고, 테스트 기법도 예시 중심으로 소개할 예정이다.


## 4.2 테스트할 샘플 코드
말 그대로 이 장에서 보여줄 예시 코드에 대한 설명이 들어있다. 지역 전체를 표현하는 `Province` 클래스와 지역의 생산자인 `Producer` 클래스로 이루어진 프로그램이다.

## 4.3 첫 번째 테스트
여기서는 `모카(Mocha)` 테스트 프레임워크를 사용한다.

### 오류 주입
> 실패해야 할 상황에서는 반드시 실패하게 만들자.
테스트를 실패하는게 없다면 일시적으로 코드에 오류를 주입해보자.

### 코멘트
https://ui.toast.com/fe-guide/ko_TEST 참고하면 좋을듯. 최근에는 Jest의 점유율이 높아지고 있다고 한다.  